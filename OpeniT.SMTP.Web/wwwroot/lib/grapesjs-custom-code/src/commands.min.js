/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/grapesjs-custom-code@0.1.3/src/commands.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{commandNameCustomCode,keyCustomCode}from"./config";export default(e,t={})=>{const o=e.Commands,{modalTitle:n,codeViewOptions:s,commandCustomCode:i}=t,d=(e,t)=>{t instanceof HTMLElement?e.appendChild(t):t&&e.insertAdjacentHTML("beforeend",t)};o.add(commandNameCustomCode,{keyCustomCode:keyCustomCode,run(e,t,o={}){this.editor=e,this.options=o,this.target=o.target||e.getSelected();const n=this.target;n&&n.get("editable")&&this.showCustomCode(n)},stop(e){e.Modal.close()},showCustomCode(e){const{editor:t,options:o}=this,s=o.title||n,i=this.getContent(),d=e.get(keyCustomCode)||"";t.Modal.open({title:s,content:i}).getModel().once("change:open",(()=>t.stopCommand(this.id))),this.getCodeViewer().setContent(d)},getPreContent(){},getPostContent(){},getContent(){const{editor:e}=this,t=document.createElement("div"),o=this.getCodeViewer(),n=e.getConfig("stylePrefix");return t.className=n+"custom-code",d(t,this.getPreContent()),t.appendChild(o.getElement()),d(t,this.getPostContent()),d(t,this.getContentActions()),o.refresh(),setTimeout((()=>o.focus()),0),t},getContentActions(){const{editor:e}=this,o=document.createElement("button"),n=e.getConfig("stylePrefix");return o.innerHTML=t.buttonLabel,o.className=`${n}btn-prim ${n}btn-import__custom-code`,o.onclick=()=>this.handleSave(),o},handleSave(){const{editor:e,target:t}=this,o=this.getCodeViewer().getContent();t.set(keyCustomCode,o),e.Modal.close()},getCodeViewer(){const{editor:e}=this;return this.codeViewer||(this.codeViewer=e.CodeManager.createViewer({codeName:"htmlmixed",theme:"hopscotch",readOnly:0,...s})),this.codeViewer},...i})};
//# sourceMappingURL=/sm/122cae36b2d22c975b246bbd374be010b40bdb2b6633022e53a9dea10cbb0cbf.map