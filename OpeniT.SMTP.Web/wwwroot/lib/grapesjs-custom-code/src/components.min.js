/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/grapesjs-custom-code@0.1.3/src/components.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{keyCustomCode,commandNameCustomCode,typeCustomCode}from"./config";export default(e,t={})=>{const o=e.DomComponents,n=o.getType("default"),s=n.model,{toolbarBtnCustomCode:m}=t;let d;o.addType("script",{view:{onRender(){this.model.closestType(typeCustomCode)&&(this.el.innerHTML="")}}}),o.addType(typeCustomCode,{model:s.extend({defaults:{...s.prototype.defaults,name:"Custom Code",editable:!0,...t.propsCustomCode},init(){this.listenTo(this,"change:"+keyCustomCode,this.onCustomCodeChange);const e=this.get(keyCustomCode)||t.placeholderContent;!this.components().length&&this.components(e);const o=this.get("toolbar"),n="custom-code";m&&!o.filter((e=>e.id===n)).length&&o.unshift({id:n,command:commandNameCustomCode,label:'<svg viewBox="0 0 24 24">\n              <path d="M14.6 16.6l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4m-5.2 0L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4z"></path>\n            </svg>',...m})},onCustomCodeChange(){this.components(this.get(keyCustomCode))}},{isComponent:()=>!1}),view:n.view.extend({events:{dblclick:"onActive"},init(){this.listenTo(this.model.components(),"add remove reset",this.onComponentsChange),this.onComponentsChange()},onComponentsChange(){d&&clearInterval(d),d=setTimeout((()=>{const{model:e}=this;let o=1;(e.get(keyCustomCode)||"").indexOf("<script")>=0&&(this.el.innerHTML=t.placeholderScript,o=0),e.set({droppable:o})}),0)},onActive(){const e=this.model;this.em.get("Commands").run(commandNameCustomCode,{target:e})}})})};
//# sourceMappingURL=/sm/1a37b7dadb9ab30ae940b8f82567947cf591286b1961b1a5fd6a56d22927cb41.map